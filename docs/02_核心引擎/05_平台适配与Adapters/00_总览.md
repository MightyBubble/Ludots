---
文档类型: 总览入口
创建日期: 2026-02-05
最后更新: 2026-02-05
维护人: X28技术团队
文档版本: v0.1
适用范围: 核心引擎 - 平台适配与Adapters - 目录入口
状态: 草案
---

# 平台适配与 Adapters 总览

# 1 本目录定位

## 1.1 读者与范围

读者：

- 引擎/平台开发者：需要理解“Core ↔ 平台实现”的分层边界与装配入口。
- 上层系统开发者：需要知道哪些能力可以依赖（接口/上下文键），哪些不得直接引用平台 SDK。

范围：

- 平台抽象（Platform.Abstractions）与 Core 的交互边界
- Adapter/Client/App 的职责切分与依赖方向
- 适配层的装配与运行主链路（以 Raylib Desktop 为主线，Web 作为对照）

## 1.2 本目录边界

- 不描述具体渲染算法与 UI 实现细节；这里只描述“分层与注入点”。  
- 不把外部库作为 SSOT；外部库对比应归档到 `docs/07_附录与扩展/external/`。  

## 1.3 推荐阅读顺序

1. `docs/02_核心引擎/05_平台适配与Adapters/01_架构设计/01_平台适配与Adapter架构.md`
2. 对照启动与运行链路的代码入口：
   - `src/Apps/Raylib/Ludots.App.Raylib/Program.cs`
   - `src/Adapters/Raylib/Ludots.Adapter.Raylib/RaylibGameHost.cs`
   - `src/Core/Hosting/GameBootstrapper.cs`
   - `src/Core/Engine/GameEngine.cs`

# 2 SSOT

## 2.1 代码入口

- 平台抽象（Host/屏幕投影/射线/渲染后端）：`src/Platform/Ludots.Platform.Abstractions/`
  - `IGameHost.cs`、`IScreenProjector.cs`、`IScreenRayProvider.cs`、`IRenderBackend.cs`
- Raylib 桌面 Host（装配与主循环）：`src/Adapters/Raylib/Ludots.Adapter.Raylib/RaylibGameHost.cs`
- 引擎 bootstrap：`src/Core/Hosting/GameBootstrapper.cs`
- 引擎装配与 Tick：`src/Core/Engine/GameEngine.cs`
- 全局上下文键：`src/Core/Scripting/ContextKeys.cs`

## 2.2 口径说明

- Core 的平台注入以 `GlobalContext[ContextKeys.*]` 为单一入口；平台层不得通过反射/全局单例绕过。  
- 平台差异（坐标系）以 `src/Core/Presentation/Coordinates/CoordinateSystemFactory.cs` 为口径入口。  

## 2.3 关键约束

1. 依赖方向固定：Core 不引用平台 SDK；平台层通过接口/上下文键向 Core 注入实现。  
2. 启动与资源路径 fail-fast：缺失 `game.json`、缺失 `assets/`、mod 不完整必须中止启动。  
3. 运行主循环归属宿主：平台 Host 提供 dt、处理窗口生命周期与渲染；Core 只推进逻辑与产出表现缓冲。  

# 3 子文档索引

## 3.1 子文档清单

- `docs/02_核心引擎/05_平台适配与Adapters/99_KANBAN.md`
- `docs/02_核心引擎/05_平台适配与Adapters/01_架构设计/01_平台适配与Adapter架构.md`
- `docs/02_核心引擎/05_平台适配与Adapters/05_对齐报告/01_RaylibHost注入清单.md`
- `docs/02_核心引擎/05_平台适配与Adapters/05_对齐报告/02_RaylibAppHostBootstrap职责边界.md`

## 3.2 文档类型与阅读路径

- 架构设计：先读分层与职责切分，再读装配入口与关键约束，最后查现状与差距。  
