---
文档类型: 总览入口
创建日期: 2026-02-05
最后更新: 2026-02-05
维护人: X28技术团队
文档版本: v1.0
适用范围: 核心引擎 - 总架构 - 目录入口
状态: 已实现
---

# 总架构 总览

# 1 本目录定位

## 1.1 读者与范围

读者：
- 引擎/基建开发者：需要理解 GameEngine 的生命周期、装配与扩展点边界
- 上层系统开发者：需要知道哪些能力属于引擎 SSOT，哪些必须通过接口/配置接入
- Mod 开发者：需要理解 CoreMod 架构与 ConfigPipeline 的配置合并机制

范围：
- GameEngine 的生命周期、装配职责与扩展点边界
- CoreMod 架构设计与 Core 层职责切分
- ConfigPipeline 配置合并管线
- game.json 配置结构规范

## 1.2 本目录边界

- 本目录只描述引擎装配、生命周期与配置架构，不重复"系统分组/TimeSlice/运行控制"细节
- 不定义任何业务语义；所有扩展只能以接口/注册表/配置注入
- 不定义 Mod 加载机制（参见 `docs/01_底层框架/02_Mod与VFS/`）

## 1.3 推荐阅读顺序

1. `docs/02_核心引擎/01_总架构/01_GameEngine_架构设计.md` - 理解引擎生命周期
2. `docs/02_核心引擎/01_总架构/02_CoreMod_架构设计.md` - 理解 Core 层与 CoreMod 的职责切分
3. `docs/02_核心引擎/01_总架构/03_ConfigPipeline_架构设计.md` - 理解配置合并机制
4. `docs/02_核心引擎/01_总架构/04_game.json_配置结构.md` - 理解配置格式与字段
5. `docs/02_核心引擎/01_总架构/05_Core层解耦_裁决条款.md` - 理解强制约束
6. `docs/02_核心引擎/02_系统分组与执行时序/00_总览.md` - 理解系统执行顺序
7. `docs/02_核心引擎/03_TimeSlice与分帧策略/00_总览.md` - 理解分帧策略

# 2 SSOT

## 2.1 代码入口

| 模块 | 路径 | 说明 |
|---|---|---|
| 引擎生命周期与装配 | `src/Core/Engine/GameEngine.cs` | 引擎主入口 |
| 全局上下文键 | `src/Core/Scripting/ContextKeys.cs` | 上下文键定义 |
| 配置数据结构 | `src/Core/Config/GameConfig.cs` | 配置模型 |
| 配置合并管线 | `src/Core/Config/ConfigPipeline.cs` | 配置收集与合并 |
| 启动编排 | `src/Core/Hosting/GameBootstrapper.cs` | 启动流程 |
| 核心游戏框架 Mod | `src/Mods/LudotsCoreMod/` | 默认配置与系统 |
| Core 层 game.json | `assets/Configs/game.json` | 引擎默认参数 |
| CoreMod game.json | `src/Mods/LudotsCoreMod/assets/game.json` | 游戏常量与启动配置 |

## 2.2 口径说明

- "引擎装配边界"的裁决以 `GameEngine` 的创建/注册流程为准；任何新增扩展点必须同步登记到 SSOT
- "游戏常量"（OrderTags、GasOrderTags、Attributes）以 `MergedConfig.Constants` 为准，不允许在代码中硬编码
- "启动地图"以 `MergedConfig.StartupMapId` 为准，不允许使用 `MapIds.Entry`

## 2.3 关键约束

1. **禁止静默 fallback**：配置缺失/依赖缺失必须 fail-fast
2. **扩展点必须显式**：Mod/Trigger 只能通过注册表与 ContextKeys 注入
3. **可观测**：启动、地图加载、关键控制器状态变化必须可观测（事件/日志/指标入口）
4. **Core 层纯基建**：Core 层不持有任何游戏内容，所有默认配置由 LudotsCoreMod 提供
5. **禁止向后兼容**：不保留 fallback 代码或废弃接口

# 3 子文档索引

## 3.1 子文档清单

| 序号 | 文档 | 类型 | 说明 |
|---:|---|---|---|
| 01 | `01_GameEngine_架构设计.md` | 架构设计 | 引擎生命周期与装配 |
| 02 | `02_CoreMod_架构设计.md` | 架构设计 | Core 层与 CoreMod 职责切分 |
| 03 | `03_ConfigPipeline_架构设计.md` | 架构设计 | 配置收集与合并管线 |
| 04 | `04_game.json_配置结构.md` | 配置结构 | game.json 格式与字段 |
| 05 | `05_Core层解耦_裁决条款.md` | 裁决条款 | Core 层解耦强制约束 |
| 06 | `06_Core层解耦_对齐报告.md` | 对齐报告 | 设计与代码对齐验证 |
| 99 | `99_KANBAN.md` | 开发看板 | 当前开发计划唯一真相 |

## 3.2 文档类型与阅读路径

### 架构设计
先读职责边界与主流程，再查"当前代码现状"与迁移策略：
1. `01_GameEngine_架构设计.md` - 引擎基础
2. `02_CoreMod_架构设计.md` - CoreMod 分层
3. `03_ConfigPipeline_架构设计.md` - 配置机制

### 配置结构
查阅字段定义与合并规则：
- `04_game.json_配置结构.md`

### 裁决条款
查阅强制约束与例外条件：
- `05_Core层解耦_裁决条款.md`

### 对齐报告
查阅设计与代码的对齐状态：
- `06_Core层解耦_对齐报告.md`

# 4 阅读路径建议

## 4.1 新手入门路径

1. 先读 `01_GameEngine_架构设计.md` 理解引擎生命周期
2. 再读 `02_CoreMod_架构设计.md` 理解架构分层
3. 查阅 `04_game.json_配置结构.md` 了解配置格式

## 4.2 Mod 开发者路径

1. 先读 `02_CoreMod_架构设计.md` 理解 Mod 与 Core 的关系
2. 再读 `03_ConfigPipeline_架构设计.md` 理解配置合并
3. 查阅 `04_game.json_配置结构.md` 编写自己的 game.json
4. 遵守 `05_Core层解耦_裁决条款.md` 的强制约束

## 4.3 维护者路径

1. 先读所有架构设计文档
2. 查阅 `06_Core层解耦_对齐报告.md` 了解当前状态
3. 更新 `99_KANBAN.md` 记录开发计划

# 5 与其他目录的关系

| 关联目录 | 关系 | 说明 |
|---|---|---|
| `docs/01_底层框架/02_Mod与VFS/` | 依赖 | Mod 加载机制 |
| `docs/02_核心引擎/02_系统分组与执行时序/` | 被引用 | 系统执行顺序 |
| `docs/02_核心引擎/03_TimeSlice与分帧策略/` | 被引用 | 分帧预算控制 |
| `docs/02_核心引擎/04_运行控制与调试/` | 被引用 | 运行时控制 |
