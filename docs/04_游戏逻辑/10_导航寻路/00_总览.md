---
文档类型: 总览入口
创建日期: 2026-02-05
最后更新: 2026-02-05
维护人: X28技术团队
文档版本: v0.1
适用范围: 游戏逻辑 - 导航寻路 - 目录入口
状态: 草案
---

# 导航寻路 总览

# 1 本目录定位

## 1.1 读者与范围

读者：

- 引擎/玩法/AI 开发者：需要理解如何发起路径请求、如何消费路径结果、哪些用法被禁止。
- 基建开发者：需要理解大世界（64km×64km）下分层导航、streaming/corridor、预算与确定性的口径。

范围：

- 导航对外契约：PathRequest/PathResult/PathHandle/PathStore
- 图模型：NodeGraph（CSR+SoA）、TraversalPolicy、Tag/Overlay
- 大世界：ChunkGraph、corridor、LoadedView 装配与预算

## 1.2 本目录边界

不在本目录定义：

- 编辑器/烘焙工具链细节（NavMesh 烘焙、地形制作等）
- 具体算法的实现优化细节（A* / ALT / HPA* 的代码级推导）
- 任何业务语义（兵种/仇恨/治疗等）

依赖关系（强制口径）：

- 导航寻路依赖：地图与地形 → 空间服务 → 物理系统。
- 其中地图与地形提供几何真源与分块口径；空间服务提供坐标域与查询契约；物理系统提供障碍与碰撞真源或派生输入。

## 1.3 推荐阅读顺序

1. 02_接口规范/01_导航寻路_接口规范.md
2. 04_裁决条款/01_64km_分层导航与合图_裁决条款.md
3. 01_架构设计/03_NavGraph生成方案_架构设计.md
4. 05_对齐报告/01_导航寻路_对齐报告.md

# 2 SSOT

## 2.1 代码入口

本目录口径的主要代码真源（仓库相对路径）：

- `src/Core/Navigation/GraphCore/NodeGraph.cs`（CSR+SoA 图数据结构）
- `src/Core/Navigation/GraphCore/NodeGraphPathService.cs`（A* 求解与预算、scratch 复用）
- `src/Core/Navigation/GraphWorld/ChunkedNodeGraphStore.cs`（chunk store + loaded view 装配）
- `src/Core/Navigation/AOI/HexGridAOI.cs`（chunk 粒度 AOI）

## 2.2 口径说明

- 大世界必须分层：L0（ChunkGraph）限定范围，L2（NodeGraph）只在 corridor 内精确求解。
- 规则与图解耦：动态封路与权重修正通过 Overlay 表达，图结构尽量只读。
- 请求/结果队列化：超限必须熔断并可审计，禁止隐式扩容与静默 fallback。

## 2.3 关键约束

- 内部世界坐标真源为厘米（cm）。
- 禁止频繁全量合图重建；LoadedView 必须受 corridor 约束并具备缓存/增量策略。
- PathHandle 必须 Index+Generation；组件内禁止裸指针与可变长容器。

# 3 子文档索引

## 3.1 子文档清单

布局 B（按类型分组）：

- 01_架构设计/
  - 01_导航寻路_架构设计.md
  - 02_层级导航与HPA_架构设计.md
  - 03_NavGraph生成方案_架构设计.md
- 02_接口规范/
  - 01_导航寻路_接口规范.md
  - 02_PathRequest_PathResult_接口规范.md
  - 03_NodeGraph_TraversalPolicy_接口规范.md
  - 04_NodeGraph与PathService_接口规范.md
- 04_裁决条款/
  - 01_64km_分层导航与合图_裁决条款.md
- 05_对齐报告/
  - 01_导航寻路_对齐报告.md
- 06_工具设计/
  - 00_总览.md
  - 01_NavGraphBaker_工具设计.md
  - 02_NavDebugKit_工具设计.md
- 07_外部参考/
  - 00_总览.md
  - 01_AnyPath_外部参考.md
  - 02_AstarPathfindingProject_外部参考.md

## 3.2 文档类型与阅读路径

- 架构设计：解释“分层导航 + streaming/corridor + 预算闭环”的整体形态与落地方式。
- 接口规范：固化对外契约（签名/参数/错误码/线程安全/容量预算/失败策略/代码入口）。
- 裁决条款：固化不可讨论的硬约束与例外条件（默认不做向后兼容与静默 fallback）。
- 对齐报告：以证据表形式列出“设计口径 vs 代码现状”，给出行动项与验收条件。
