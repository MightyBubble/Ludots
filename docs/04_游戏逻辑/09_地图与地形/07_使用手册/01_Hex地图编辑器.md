---
文档类型: 使用手册
创建日期: 2026-02-05
最后更新: 2026-02-05
维护人: X28技术团队
文档版本: v0.1
适用范围: 游戏逻辑 - 地图与地形 - Hex地图编辑器
状态: 草案
---

# Hex地图编辑器 使用手册

# 1 工具定位

- 用途：为 Hex(VertexMap) 地形真源提供可视化编辑能力（地表高度、水体、阻挡、坡道等）。
- 输出：与引擎中 `VertexMapBinary` 兼容的地形数据资产（推荐直接产出 VTXM，或产出中间 JSON 由后端转换）。

# 2 初始化与数据流

- 初始加载：
  - 从现有 VTXM 或中间格式加载地形数据，映射到编辑器内部网格。
- 编辑与保存：
  - 在编辑器中修改高度/水体/阻挡等，保存时导出 VTXM 或中间 JSON。
- 集成到 Ludots：
  - 将产出的资产放入 Core 或 Mod 的 assets 结构中，由 MapConfig 的 Hex 数据集配置引用。

# 3 典型用户故事

- 故事 1：地图作者为某战役关卡手工雕刻地形
  - 作为“地图作者”，我可以打开一张已有的 Hex 地图，查看当前高度与水体分布。
  - 我可以在编辑器中增减山脊、河流与阻挡，实时看到变化。
  - 我保存后，游戏在下一次 LoadMap 时使用新的地形真源。

- 故事 2：技术美术调整不同地图间的一致性
  - 作为“技术美术”，我可以从一个“示例地图”复制一套 Hex 地形设置到另一张地图，并局部调整。

# 4 与后端的接口约定（目标口径）

- 读接口：
  - 输入：地图标识或 VFS URI（例如 `Core:assets/Data/Maps/example.vtxm`）。
  - 输出：编辑器内部结构（高度/水体/flags 等）。
- 写接口：
  - 输入：编辑器内部结构。
  - 输出：写回指定 VFS URI 或导出为本地文件，由构建流程负责拷贝进 assets。

# 5 与 MapConfig 的关系

- MapConfig 中的 Hex 数据集（历史上为 `DataFile` 字段）应当引用由本编辑器产出的资产。
- 同一份 Vertex 真源可以被多个 MapId 复用（例如“世界大地图”），但对每个最终地图来说 Hex 真源仍然唯一。
