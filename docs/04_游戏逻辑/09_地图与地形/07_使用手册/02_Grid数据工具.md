---
文档类型: 使用手册
创建日期: 2026-02-05
最后更新: 2026-02-05
维护人: X28技术团队
文档版本: v0.1
适用范围: 游戏逻辑 - 地图与地形 - Grid数据工具
状态: 草案
---

# Grid数据工具 使用手册

# 1 工具定位

- 用途：制作/校验/可视化 Grid 场数据（coarse/fine），用于天气、流场等系统。
- 输出：Grid 数据集资产（目标形态），可被地图加载阶段选择性加载并注入 MapLoaded 上下文。

# 2 数据类型与建议分层

- coarse grid（大颗粒）：低分辨率、低更新频率，适合天气类宏观场。
- fine grid（小颗粒）：高分辨率、局部更新频率高，适合流场/扩散/气味等局部场。

# 3 典型用户故事

- 故事 1：设计师编辑天气分区
  - 作为“关卡设计师”，我可以在 coarse grid 上绘制温度/湿度/降雨等级的分区。
  - 我可以导出并绑定到地图的 `grid_coarse_weather` 数据集。

- 故事 2：程序配置流场初始化
  - 作为“程序”，我可以生成一张 fine grid 的初始向量场（风/水流），并导出为 `grid_fine_flow` 数据集。

# 4 后端接口（目标口径）

读写接口采用“数据集”为单位，且带版本与元信息，避免静默兼容：

- GET GridDataSet
  - 入参：GridId、MapId 或资产路径
  - 出参：dims、cellSize、origin、fields 元信息与各字段数据
- PUT/POST GridDataSet
  - 入参：同上
  - 出参：写入结果与校验报告（字段类型/维度/范围）

# 5 校验与诊断

- 校验项：
  - dims 与 cellSize 合法
  - field 类型与数据长度匹配
  - 与地图坐标口径一致（厘米域/offset）
- 失败策略：
  - 输出 GridId、字段名、来源与证据路径，禁止 silent fallback。
